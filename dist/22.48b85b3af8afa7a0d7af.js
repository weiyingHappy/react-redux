webpackJsonp([22],{1073:function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function o(e,t){var n={};for(var a in e)t.indexOf(a)>=0||Object.prototype.hasOwnProperty.call(e,a)&&(n[a]=e[a]);return n}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function l(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),c=n(17),d=a(c),u=n(28),f=a(u),p=function(e){function t(e){r(this,t);var n=l(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.scrollListener=n.scrollListener.bind(n),n}return i(t,e),s(t,[{key:"componentDidMount",value:function(){this.pageLoaded=this.props.pageStart,this.attachScrollListener()}},{key:"componentDidUpdate",value:function(){this.attachScrollListener()}},{key:"componentWillUnmount",value:function(){this.detachScrollListener()}},{key:"setDefaultLoader",value:function(e){this.defaultLoader=e}},{key:"detachScrollListener",value:function(){var e=window;!1===this.props.useWindow&&(e=this.scrollComponent.parentNode),e.removeEventListener("scroll",this.scrollListener,this.props.useCapture),e.removeEventListener("resize",this.scrollListener,this.props.useCapture)}},{key:"attachScrollListener",value:function(){if(this.props.hasMore){var e=window;!1===this.props.useWindow&&(e=this.scrollComponent.parentNode),e.addEventListener("scroll",this.scrollListener,this.props.useCapture),e.addEventListener("resize",this.scrollListener,this.props.useCapture),this.props.initialLoad&&this.scrollListener()}}},{key:"scrollListener",value:function(){var e=this.scrollComponent,t=window,n=void 0;if(this.props.useWindow){var a=void 0!==t.pageYOffset?t.pageYOffset:(document.documentElement||document.body.parentNode||document.body).scrollTop;n=this.props.isReverse?a:this.calculateTopPosition(e)+(e.offsetHeight-a-window.innerHeight)}else n=this.props.isReverse?e.parentNode.scrollTop:e.scrollHeight-e.parentNode.scrollTop-e.parentNode.clientHeight;n<Number(this.props.threshold)&&(this.detachScrollListener(),"function"==typeof this.props.loadMore&&this.props.loadMore(this.pageLoaded+=1))}},{key:"calculateTopPosition",value:function(e){return e?e.offsetTop+this.calculateTopPosition(e.offsetParent):0}},{key:"render",value:function(){var e=this,t=this.props,n=t.children,a=t.element,r=t.hasMore,l=(t.initialLoad,t.isReverse,t.loader),i=(t.loadMore,t.pageStart,t.threshold,t.useCapture,t.useWindow,o(t,["children","element","hasMore","initialLoad","isReverse","loader","loadMore","pageStart","threshold","useCapture","useWindow"]));return i.ref=function(t){e.scrollComponent=t},d.default.createElement(a,i,n,r&&(l||this.defaultLoader))}}]),t}(c.Component);p.propTypes={element:f.default.string,hasMore:f.default.bool,initialLoad:f.default.bool,isReverse:f.default.bool,loadMore:f.default.func.isRequired,pageStart:f.default.number,threshold:f.default.number,useCapture:f.default.bool,useWindow:f.default.bool,children:f.default.oneOfType([f.default.object,f.default.array]).isRequired,loader:f.default.object},p.defaultProps={element:"div",hasMore:!1,initialLoad:!0,pageStart:0,threshold:250,useWindow:!0,isReverse:!1,useCapture:!1,loader:null},t.default=p,e.exports=t.default},1074:function(e,t,n){e.exports=n(1073)},1114:function(e,t,n){var a=n(991);"string"==typeof a&&(a=[[e.i,a,""]]);n(366)(a,{});a.locals&&(e.exports=a.locals)},748:function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function l(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},s=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),c=n(17),d=a(c),u=n(111);n(1114);var f=n(21),p=a(f),m=n(1074),b=a(m),h=function(e){function t(){o(this,t);var e=r(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.state={orders:[],page:1,showinfo:!1,showorder:void 0,showcancel:!1,hasmore:!1},e}return l(t,e),s(t,[{key:"getCookie",value:function(e){if(document.cookie.length>0)try{var t=new RegExp("(^|\\s)"+e+"=([^;]*)(;|$)"),n=document.cookie.match(t);return n?n[2]:null}catch(e){console.log(e)}return""}},{key:"componentWillMount",value:function(){}},{key:"filterOrderState",value:function(e){var t="未知",n="gray_bg";switch(e){case 0:t="未支付",n="red_bg";break;case 1:t="确认中",n="green_bg";break;case 2:t="派单中",n="green_bg";break;case 3:t="已接单",n="blue_bg";break;case 4:t="运送中",n="blue_bg";break;case 5:t="已到达",n="blue_bg";break;case 6:t="已完成",n="orange_bg";break;case 7:t="已取消",n="gray_bg"}return d.default.createElement("div",{className:"state "+n},t)}},{key:"handleOrderItemClick",value:function(e){location.href="luggage_orderinfo?id="+e.id}},{key:"filterPaytype",value:function(e){return 0==e?"微信支付":"支付宝支付"}},{key:"filterFlowuser",value:function(e){if(3===e.extra.state||4===e.extra.state||5===e.extra.state)return d.default.createElement("div",null,d.default.createElement("div",{className:"flowuser"},"配送人员：",e.extra.user_name),d.default.createElement("div",{className:"flowuser flowphone"},"联系电话：",e.extra.phone))}},{key:"toggaleCancelModal",value:function(){this.setState(i({},this.state,{showcancel:!this.state.showcancel}))}},{key:"cancelOrder",value:function(){var e=this;$.ajax({url:p.default.api_host+"/FE/OrderExtra/cancelWuyouOrder/"+this.state.showorder.id,method:"GET",dataType:"JSON",beforeSend:function(t){return t.setRequestHeader("Session-Token",e.getCookie("token")||p.default.admin_token)},success:function(t){200===t.code&&(e.setState(i({},e.state,{showcancel:!1})),history.back(),setTimeout(function(){location.reload()},10))}})}},{key:"cancelModal",value:function(e){if(this.state.showcancel)return d.default.createElement("div",{className:"cancelmodal",onClick:this.toggaleCancelModal.bind(this)},d.default.createElement("div",{className:"modalpanel",onClick:function(e){e.stopPropagation()}},d.default.createElement("div",{className:"mpaneltitle"},"取消订单"),d.default.createElement("div",{className:"content"},d.default.createElement("div",{className:"mline"},d.default.createElement("span",{className:"mtitle"},"起点："),d.default.createElement("span",{className:"mtext"},e.desc.start_address)),d.default.createElement("div",{className:"mline"},d.default.createElement("span",{className:"mtitle"},"终点："),d.default.createElement("span",{className:"mtext"},e.desc.end_address)),d.default.createElement("div",{className:"mline"},d.default.createElement("span",{className:"mtitle"},"行李总数："),d.default.createElement("span",{className:"mtext"},e.desc.num)),d.default.createElement("div",{className:"wmsg"},"您的取消申请将发送至客服，确认取消后我们的客服 将第一时间和您核对情况")),d.default.createElement("div",{className:"btns"},d.default.createElement("button",{onClick:this.toggaleCancelModal.bind(this)},"点错了"),d.default.createElement("button",{className:"primary",onClick:this.cancelOrder.bind(this)},"确认取消"))))}},{key:"loadMore",value:function(){var e=this;this.state.hasmore&&$.ajax({url:p.default.api_host+"/FE/OrderExtra/wuoyouOrders/"+this.state.page++,method:"GET",dataType:"JSON",beforeSend:function(t){return t.setRequestHeader("Session-Token",e.getCookie("token")||p.default.admin_token)},success:function(t){200===t.code&&e.setState(Object.assign(e.state,{orders:e.state.orders.concat(t.results.lists)})),t.results.nowPage<t.results.totalPage?e.setState(i({},e.state,{hasmore:!0})):e.setState(i({},e.state,{hasmore:!1})),console.log(e.state)}})}},{key:"render",value:function(){var e=this;if(this.state.showinfo){var t=this.state.showorder;return d.default.createElement("div",{className:"page"},d.default.createElement("div",{className:"order"},7!=t.extra.state?d.default.createElement("div",{className:"cancelorder"},d.default.createElement("span",{onClick:this.toggaleCancelModal.bind(this)},"取消订单>>")):"",d.default.createElement("div",{className:"address panel"},d.default.createElement("div",{className:"start"},d.default.createElement("span",{className:"btitle"},"起"),d.default.createElement("span",{className:"title"},t.desc.start_address)),d.default.createElement("div",{className:"end"},d.default.createElement("span",{className:"btitle"},"终"),d.default.createElement("span",{className:"title"},t.desc.end_address))),d.default.createElement("div",{className:"info panel"},d.default.createElement("div",{className:"infostate"},this.filterOrderState(t.extra.state)),d.default.createElement("div",{className:"line"},"联系人：",t.user_name),d.default.createElement("div",{className:"line"},"联系电话：",t.phone),d.default.createElement("div",{className:"line"},"行李数量：",t.desc.num),d.default.createElement("div",{className:"line"},"费用：",d.default.createElement("span",{className:"money"},t.price,"元"),this.filterPaytype(t.pay_type)),d.default.createElement("div",{className:"line"},"订单编号：",t.order_no),d.default.createElement("div",{className:"line"},"下单时间：",t.create_time),d.default.createElement("div",{className:"line"},"到达时间：",t.desc.end_time)),d.default.createElement("div",{className:"flow panel"},this.filterFlowuser(t),d.default.createElement("div",{className:"flowline"},d.default.createElement("ul",null,d.default.createElement("li",{className:"end"},d.default.createElement("div",{className:"msg"},t.extra.end_address),d.default.createElement("div",{className:"time"},t.extra.end_time," 到达")),t.extra.flow.map(function(e,t){return d.default.createElement("li",{className:0===t?"active":"",key:t},d.default.createElement("div",{className:"msg"},e.event),d.default.createElement("div",{className:"time"},e.time))}))))),this.cancelModal(t))}var n=this.state.orders;return 0===n.length?d.default.createElement("div",{className:"page"},d.default.createElement("div",{className:"none"},"暂无无忧行李订单"),d.default.createElement("div",{className:"footer"})):d.default.createElement("div",{className:"page"},d.default.createElement(b.default,{pageStart:1,loadMore:this.loadMore.bind(this),hasMore:this.state.hasmore,useWindow:!1},d.default.createElement("ul",{className:"orders"},n.map(function(t,n){return d.default.createElement("li",{className:"item",key:n,onClick:function(){e.handleOrderItemClick(t)}},d.default.createElement("div",{className:"content"},d.default.createElement("div",{className:"title"},t.desc.start_address),d.default.createElement("div",{className:"title"},"—",t.desc.end_address),d.default.createElement("div",{className:"graytext"},"行李数：",t.desc.num,"件"),d.default.createElement("div",{className:"graytext"},"时间：",t.desc.end_time," 到达"),e.filterOrderState(t.extra.state)))})),d.default.createElement("div",{className:"footer"})))}}]),t}(d.default.Component);t.default=(0,u.connect)()(h)},991:function(e,t,n){t=e.exports=n(365)(),t.push([e.i,"@charset \"UTF-8\";\nhtml, body, #main-container, .page {\n  height: 100%; }\n\n* {\n  font-family: PingFang-SC-Medium, Microsoft YaHei; }\n\n.page {\n  background-color: #F2F2F2;\n  overflow-y: auto;\n  -webkit-overflow-scrolling: touch; }\n\n.item {\n  box-sizing: border-box;\n  padding: 10px 10px 0 10px; }\n\n.item .content {\n  border: solid 1px #DCDCDC;\n  background-color: #fff;\n  box-sizing: border-box;\n  padding: 18px 12px;\n  position: relative;\n  border-radius: 2px;\n  box-shadow: 0px 1px 4px 0px #ddd; }\n\n.title {\n  font-size: 16px;\n  width: 80%; }\n\n.graytext {\n  font-size: 13px;\n  color: #717171;\n  margin-top: 10px; }\n\n.state {\n  position: absolute;\n  background-color: #FF0000;\n  border-top-left-radius: 10px;\n  color: #fff;\n  top: 10px;\n  right: 10px;\n  font-size: 13px;\n  padding: 5px 10px; }\n\n.panel {\n  background-color: #fff;\n  border-top: solid 1px #ddd;\n  border-bottom: solid 1px #ddd;\n  box-sizing: border-box;\n  padding: 17px 0px;\n  margin-bottom: 8px; }\n\n.address .btitle {\n  font-size: 17px;\n  vertical-align: top;\n  margin-right: 9px;\n  color: #666666;\n  margin-left: 20px;\n  display: inline-block; }\n\n.address .title {\n  font-size: 16px;\n  vertical-align: top;\n  color: #333333;\n  display: inline-block;\n  width: 80%;\n  word-break: break-all; }\n\n.info .infostate {\n  border-bottom: solid 1px #DCDCDC; }\n\n.info .infostate .state {\n  position: static;\n  display: inline-block;\n  margin-bottom: 10px;\n  margin-left: 10px;\n  border-top-left-radius: 0;\n  border-top-right-radius: 10px; }\n\n.info .line {\n  font-size: 13px;\n  color: #666666;\n  margin-top: 10px;\n  box-sizing: border-box;\n  padding-left: 19px; }\n\n.flow .flowuser {\n  box-sizing: border-box;\n  padding-left: 19px;\n  color: #333333;\n  font-size: 13px;\n  margin: 5px 0; }\n\n.flow .flowphone {\n  padding-bottom: 20px;\n  border-bottom: solid 1px #DCDCDC;\n  margin: 0; }\n\n.flowline li {\n  box-sizing: border-box;\n  padding: 15px 0 0px 50px;\n  position: relative; }\n\n.flowline li::after {\n  content: '';\n  display: block;\n  position: absolute;\n  width: 2px;\n  height: 100%;\n  background-color: #DDDDDD;\n  left: 25px;\n  top: 10px;\n  z-index: 1; }\n\n.flowline li:last-child::after {\n  display: none; }\n\n.flowline li::before {\n  content: '';\n  display: block;\n  width: 15px;\n  height: 15px;\n  background-color: #FFA77F;\n  border-radius: 50%;\n  position: absolute;\n  top: 10px;\n  left: 18px;\n  z-index: 2; }\n\n.flowline li.active::before {\n  background-color: #FF5000;\n  border: solid 3px #FFA77F;\n  left: 15px; }\n\n.flowline li.end::before {\n  content: '\\E654';\n  font-family: 'iconfont';\n  font-size: 30px;\n  color: #DDDDDD;\n  width: 18px;\n  height: 18px;\n  background-color: #fff;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  left: 17px; }\n\n.flowline li .msg {\n  font-size: 15px;\n  color: #999999; }\n\n.flowline li .time {\n  font-size: 13px;\n  color: #999999;\n  padding-bottom: 15px;\n  border-bottom: solid 1px #DCDCDC; }\n\n.flowline li.end.finash::before {\n  color: #FF5000; }\n\n.money {\n  color: #ff0000;\n  margin-right: 10px; }\n\n.cancelorder {\n  text-align: right;\n  box-sizing: border-box;\n  padding: 10px 10px 10px 0; }\n\n.cancelorder span {\n  font-size: 13px;\n  color: #FF5000; }\n\n.none {\n  text-align: center;\n  padding: 15px 0;\n  font-size: 15px;\n  color: #999999; }\n\n.cancelmodal {\n  position: fixed;\n  width: 100%;\n  height: 100%;\n  background-color: rgba(0, 0, 0, 0.4);\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  top: 0;\n  z-index: 10; }\n\n.modalpanel {\n  width: 70%;\n  background-color: #fff;\n  border-radius: 10px; }\n\n.mpaneltitle {\n  padding: 15px 0;\n  text-align: center;\n  border-bottom: solid 1px #ddd; }\n\n.mline {\n  padding-left: 10px; }\n\nspan.mtitle {\n  font-size: 14px;\n  color: #ADADAD; }\n\nspan.mtext {\n  font-size: 14px;\n  color: #666666; }\n\n.wmsg {\n  font-size: 12px;\n  color: #ff0000;\n  padding: 10px; }\n\n.btns {\n  padding: 10px 0;\n  text-align: center; }\n\n.btns button {\n  background-color: #fff;\n  border: solid 1px #ADADAD;\n  width: 84px;\n  height: 31px;\n  border-radius: 2px;\n  color: #666;\n  margin: 0 5px;\n  outline: none; }\n\n.btns button.primary {\n  background-color: #FF5000;\n  border: solid 1px #FF5000;\n  color: #fff; }\n\n.footer {\n  text-align: center;\n  padding: 15px 0;\n  font-size: 13px;\n  color: #999999; }\n\n/**\r\n标签颜色\r\n*/\n.red_bg {\n  background-color: #FF0000; }\n\n.green_bg {\n  background-color: #22AC38; }\n\n.blue_bg {\n  background-color: #3EB7F6; }\n\n.orange_bg {\n  background-color: #FF5000; }\n\n.gray_bg {\n  background-color: #CCCCCC; }\n\n.cancel {\n  box-sizing: border-box;\n  padding-left: 19px;\n  color: #333333;\n  font-size: 13px; }\n\n.to-pay {\n  position: fixed;\n  bottom: 0;\n  height: 50px;\n  width: 100%;\n  border: none;\n  background-color: #FF5000;\n  color: #fff;\n  font-size: 18px; }\n",""])}});