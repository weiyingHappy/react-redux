webpackJsonp([32],{

/***/ 748:
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _react = __webpack_require__(20);\n\nvar _react2 = _interopRequireDefault(_react);\n\nvar _reactRedux = __webpack_require__(368);\n\nvar _user = __webpack_require__(370);\n\nvar _common = __webpack_require__(378);\n\nvar _reactRouter = __webpack_require__(55);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; } /**\r\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * 验证页面，通过此页面路由到其他页面\r\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * :hotel_token  为酒店对应的token\r\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * :alias        为跳转别名\r\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                */\n\n\nvar Entrance = function (_Component) {\n    _inherits(Entrance, _Component);\n\n    function Entrance() {\n        var _ref;\n\n        var _temp, _this, _ret;\n\n        _classCallCheck(this, Entrance);\n\n        for (var _len = arguments.length, args = Array(_len), _key = 0; _key < _len; _key++) {\n            args[_key] = arguments[_key];\n        }\n\n        return _ret = (_temp = (_this = _possibleConstructorReturn(this, (_ref = Entrance.__proto__ || Object.getPrototypeOf(Entrance)).call.apply(_ref, [this].concat(args))), _this), _this.state = {\n            auth: 0, // 验证状态 0:验证中 1:成功 2:失败\n            msg: '验证中...'\n        }, _temp), _possibleConstructorReturn(_this, _ret);\n    }\n\n    _createClass(Entrance, [{\n        key: 'componentWillMount',\n        value: function componentWillMount() {\n            var _this2 = this;\n\n            var dispatch = this.props.dispatch;\n\n\n            var token = this.props.params.hotel_token;\n            var alias = this.props.params.alias;\n            var code = this.props.location.query.code;\n            // 将token和code放入本地\n            localStorage.token = token;\n            localStorage.code = code;\n\n            dispatch((0, _user.fetchLogin)({\n                token: token,\n                code: code\n            })).then(function (data) {\n                // 因为这里的code不一定是200， 所以判断是否有results进行下一步\n                if (data.results) {\n                    // 动态加载css\n                    var link_tag = document.createElement('link');\n                    link_tag.rel = 'stylesheet';\n\n                    var env = (0, _common.getBrowserEnv)();\n                    var style_href = '/cmsfont/';\n                    if (env === 'development') {\n                        style_href = '/';\n                    }\n                    link_tag.href = style_href + 'theme/one/style1.css';\n\n                    document.querySelector('head').appendChild(link_tag);\n\n                    //TODO: 进行模板判断跳转路由\n                    switch (Number(alias)) {\n                        case 1:\n                            _reactRouter.browserHistory.push('/cmsfont/rooms');\n                        case 2:\n                            _reactRouter.browserHistory.push('/cmsfont/myorder');\n                        default:\n                            _this2.setState({\n                                msg: '为匹配到alias跳转'\n                            });\n                    }\n                    if (Number(alias) === 1) {\n                        _reactRouter.browserHistory.push('');\n                    }\n                } else {\n                    _this2.setState({\n                        auth: 2\n                    });\n                }\n            }).catch(function (error) {\n                alert('出现一个严重错误, code: cms_api');\n            });\n        }\n    }, {\n        key: 'render',\n        value: function render() {\n            if (this.state.auth === 2) {\n                return _react2.default.createElement(\n                    'div',\n                    null,\n                    '\\u767B\\u9646\\u5931\\u8D25'\n                );\n            }\n            return _react2.default.createElement(\n                'div',\n                null,\n                '\\u9A8C\\u8BC1\\u9875\\u9762',\n                _react2.default.createElement(\n                    'ul',\n                    null,\n                    _react2.default.createElement(\n                        'li',\n                        null,\n                        '\\u72B6\\u6001\\uFF1A',\n                        this.state.msg\n                    )\n                )\n            );\n        }\n    }]);\n\n    return Entrance;\n}(_react.Component);\n\nexports.default = (0, _reactRedux.connect)()(Entrance);\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiNzQ4LmpzIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vL3NyYy9wYWdlL2VudHJhbmNlLmpzPzU1MDIiXSwic291cmNlc0NvbnRlbnQiOlsiLyoqXHJcbiAqIOmqjOivgemhtemdou+8jOmAmui/h+atpOmhtemdoui3r+eUseWIsOWFtuS7lumhtemdolxyXG4gKiA6aG90ZWxfdG9rZW4gIOS4uumFkuW6l+WvueW6lOeahHRva2VuXHJcbiAqIDphbGlhcyAgICAgICAg5Li66Lez6L2s5Yir5ZCNXHJcbiAqL1xyXG5pbXBvcnQgUmVhY3QsIHsgQ29tcG9uZW50IH0gZnJvbSAncmVhY3QnXHJcbmltcG9ydCB7IGNvbm5lY3QgfSBmcm9tICdyZWFjdC1yZWR1eCdcclxuaW1wb3J0IHsgZmV0Y2hMb2dpbiB9IGZyb20gJ0Avc3JjL2FjdGlvbnMvdXNlcidcclxuaW1wb3J0IHsgZ2V0QnJvd3NlckVudiB9IGZyb20gJ0Avc3JjL2NvbW1vbidcclxuaW1wb3J0IHsgYnJvd3Nlckhpc3RvcnkgfSBmcm9tICdyZWFjdC1yb3V0ZXInXHJcblxyXG5jbGFzcyBFbnRyYW5jZSBleHRlbmRzIENvbXBvbmVudCB7XHJcbiAgc3RhdGUgPSB7XHJcbiAgICBhdXRoOiAwLCAvLyDpqozor4HnirbmgIEgMDrpqozor4HkuK0gMTrmiJDlip8gMjrlpLHotKVcclxuICAgIG1zZzogJ+mqjOivgeS4rS4uLidcclxuICB9XHJcbiAgY29tcG9uZW50V2lsbE1vdW50KCkge1xyXG4gICAgY29uc3QgeyBkaXNwYXRjaCB9ID0gdGhpcy5wcm9wc1xyXG5cclxuICAgIGNvbnN0IHRva2VuID0gdGhpcy5wcm9wcy5wYXJhbXMuaG90ZWxfdG9rZW5cclxuICAgIGNvbnN0IGFsaWFzID0gdGhpcy5wcm9wcy5wYXJhbXMuYWxpYXNcclxuICAgIGNvbnN0IGNvZGUgPSB0aGlzLnByb3BzLmxvY2F0aW9uLnF1ZXJ5LmNvZGVcclxuICAgIC8vIOWwhnRva2Vu5ZKMY29kZeaUvuWFpeacrOWcsFxyXG4gICAgbG9jYWxTdG9yYWdlLnRva2VuID0gdG9rZW5cclxuICAgIGxvY2FsU3RvcmFnZS5jb2RlID0gY29kZVxyXG5cclxuICAgIGRpc3BhdGNoKGZldGNoTG9naW4oe1xyXG4gICAgICAgIHRva2VuLFxyXG4gICAgICAgIGNvZGVcclxuICAgIH0pKS50aGVuKChkYXRhKSA9PiB7XHJcbiAgICAgICAgLy8g5Zug5Li66L+Z6YeM55qEY29kZeS4jeS4gOWumuaYrzIwMO+8jCDmiYDku6XliKTmlq3mmK/lkKbmnIlyZXN1bHRz6L+b6KGM5LiL5LiA5q2lXHJcbiAgICAgICAgaWYoZGF0YS5yZXN1bHRzKSB7XHJcbiAgICAgICAgICAgIC8vIOWKqOaAgeWKoOi9vWNzc1xyXG4gICAgICAgICAgICBsZXQgbGlua190YWcgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdsaW5rJylcclxuICAgICAgICAgICAgbGlua190YWcucmVsID0gJ3N0eWxlc2hlZXQnXHJcblxyXG4gICAgICAgICAgICBjb25zdCBlbnYgPSBnZXRCcm93c2VyRW52KClcclxuICAgICAgICAgICAgbGV0IHN0eWxlX2hyZWYgPSAnL2Ntc2ZvbnQvJ1xyXG4gICAgICAgICAgICBpZihlbnYgPT09ICdkZXZlbG9wbWVudCcpIHtcclxuICAgICAgICAgICAgICAgIHN0eWxlX2hyZWYgPSAnLydcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBsaW5rX3RhZy5ocmVmID0gc3R5bGVfaHJlZiArICd0aGVtZS9vbmUvc3R5bGUxLmNzcydcclxuXHJcbiAgICAgICAgICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJ2hlYWQnKS5hcHBlbmRDaGlsZChsaW5rX3RhZylcclxuXHJcbiAgICAgICAgICAgIC8vVE9ETzog6L+b6KGM5qih5p2/5Yik5pat6Lez6L2s6Lev55SxXHJcbiAgICAgICAgICAgIHN3aXRjaChOdW1iZXIoYWxpYXMpKSB7XHJcbiAgICAgICAgICAgICAgICBjYXNlIDE6XHJcbiAgICAgICAgICAgICAgICAgICAgYnJvd3Nlckhpc3RvcnkucHVzaCgnL2Ntc2ZvbnQvcm9vbXMnKVxyXG4gICAgICAgICAgICAgICAgY2FzZSAyOlxyXG4gICAgICAgICAgICAgICAgICAgIGJyb3dzZXJIaXN0b3J5LnB1c2goJy9jbXNmb250L215b3JkZXInKVxyXG4gICAgICAgICAgICAgICAgZGVmYXVsdDpcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLnNldFN0YXRlKHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgbXNnOiAn5Li65Yy56YWN5YiwYWxpYXPot7PovawnXHJcbiAgICAgICAgICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBpZihOdW1iZXIoYWxpYXMpPT09MSkge1xyXG4gICAgICAgICAgICAgICAgYnJvd3Nlckhpc3RvcnkucHVzaCgnJylcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIHRoaXMuc2V0U3RhdGUoe1xyXG4gICAgICAgICAgICAgICAgYXV0aDogMlxyXG4gICAgICAgICAgICB9KVxyXG4gICAgICAgIH1cclxuICAgIH0pLmNhdGNoKChlcnJvcikgPT4ge1xyXG4gICAgICAgIGFsZXJ0KCflh7rnjrDkuIDkuKrkuKXph43plJnor68sIGNvZGU6IGNtc19hcGknKVxyXG4gICAgfSlcclxuICB9XHJcbiAgcmVuZGVyKCkge1xyXG4gICAgaWYodGhpcy5zdGF0ZS5hdXRoID09PSAyKSB7XHJcbiAgICAgICAgcmV0dXJuIChcclxuICAgICAgICAgICAgPGRpdj7nmbvpmYblpLHotKU8L2Rpdj5cclxuICAgICAgICApXHJcbiAgICB9XHJcbiAgICByZXR1cm4gKFxyXG4gICAgICA8ZGl2PlxyXG4gICAgICAgIOmqjOivgemhtemdolxyXG4gICAgICAgIDx1bD5cclxuICAgICAgICAgICAgPGxpPueKtuaAge+8mnt0aGlzLnN0YXRlLm1zZ308L2xpPlxyXG4gICAgICAgIDwvdWw+XHJcbiAgICAgIDwvZGl2PlxyXG4gICAgKVxyXG4gIH1cclxufVxyXG5cclxuZXhwb3J0IGRlZmF1bHQgY29ubmVjdCgpKEVudHJhbmNlKVxyXG5cblxuXG4vLyBXRUJQQUNLIEZPT1RFUiAvL1xuLy8gc3JjL3BhZ2UvZW50cmFuY2UuanMiXSwibWFwcGluZ3MiOiI7Ozs7Ozs7O0FBS0E7QUFDQTs7O0FBQUE7QUFDQTtBQUFBO0FBQ0E7QUFBQTtBQUNBO0FBQUE7QUFDQTs7Ozs7OztBQVZBOzs7Ozs7O0FBV0E7Ozs7Ozs7Ozs7Ozs7O0FBQ0E7QUFDQTtBQUNBO0FBRkE7Ozs7O0FBSUE7QUFBQTtBQUNBO0FBREE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFGQTtBQUlBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQURBO0FBTkE7QUFVQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFEQTtBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7OztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFBQTtBQUFBO0FBRUE7QUFDQTtBQUNBO0FBQUE7QUFBQTtBQUVBO0FBQUE7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQURBO0FBRkE7QUFPQTs7Ozs7O0FBR0EiLCJzb3VyY2VSb290IjoiIn0=");

/***/ })

});